Dokuwiki Data Plugin
====================

The data plugin provides syntax for users to specify calls to a predefined data service.  All data is requested from the data service by client-side javascript and loaded into browser memory in a global variable.  This data variable and the custom jQuery events triggered by the data javascript are available to javascript for other plugins such as Google Maps.

How It Works
------------

The user defines a data set by entering a JSON string containing at least a "name" and a "method" property.  The plugin replaces the data set declaration with a hidden span tag containing the JSON string.  The span tag has a class attribute identifying it as a dokuwiki data set.

When the dokuwiki page loads, the plugin's javascript looks for all DOM elements with the dokuwiki data set class.  The contents of each element are parsed as JSON and used to make an AJAX call to the data service.  The data service URL is embedded in the plugin output by the server side code.

The default data service URL is defined through the plugin configuration in the admin tool.  It can be overriden in the data set declaration by adding a "_service_url" argument to the JSON string.  Data service URLs should accept a "method" GET argument and zero or more named GET arguments.  For example:

http://localhost/service.php?method=getSamples&species=Autographa ampla

This URL is the equivalent of calling getSamples(species="Autographa ampla") on the data server.  The results of this call are returned to the browser as JSON.

The results of the AJAX call to the data service are stored in a global variable indexed by the name of the data set.  Additionally, a custom event is triggered for the original data set span.  These two global actions, updating a global variable and triggering an event, allow other javascript applications to act on the data set.

Syntax Examples
---------------

Method without arguments:

<data>{"name": "counties", "method": "getCounties"}</data>

Method with one argument:

<data>{"name": "species-data", "method": "getSamples", "args": {"species": "Autographa ampla"}}</data>